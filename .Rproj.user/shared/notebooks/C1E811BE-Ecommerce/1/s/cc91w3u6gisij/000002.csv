"0","#Cargamos los datos:"
"0","data <- read.csv(""data.csv"")"
"0","class(data$InvoiceDate)"
"1","[1]"
"1"," ""character"""
"1","
"
"0","#A priori parace que solo tenemos problemas con la fecha de la factura que es leída como un string"
"0","data <- data %>%"
"0","  mutate("
"0","    ParsedDate = parse_datetime(InvoiceDate, format = ""%m/%d/%Y %H:%M"")"
"0","  )"
"0","#Comprobamos que no haya NA en el fichero"
"0","anyNA(data) #Tenemos NA"
"1","[1]"
"1"," TRUE"
"1","
"
"0","summary(data) #Solo hay NA's en CustomerID"
"1",""
"1","  InvoiceNo        "
"1","  StockCode        "
"1"," Description       "
"1","    Quantity        "
"1","
"
"1"," Length:541909     "
"1"," Length:541909     "
"1"," Length:541909     "
"1"," Min.   :-80995.00  "
"1","
"
"1"," Class :character  "
"1"," Class :character  "
"1"," Class :character  "
"1"," 1st Qu.:     1.00  "
"1","
"
"1"," Mode  :character  "
"1"," Mode  :character  "
"1"," Mode  :character  "
"1"," Median :     3.00  "
"1","
"
"1","                   "
"1","                   "
"1","                   "
"1"," Mean   :     9.55  "
"1","
"
"1","                   "
"1","                   "
"1","                   "
"1"," 3rd Qu.:    10.00  "
"1","
"
"1","                   "
"1","                   "
"1","                   "
"1"," Max.   : 80995.00  "
"1","
"
"1","                   "
"1","                   "
"1","                   "
"1","                    "
"1","
"
"1",""
"1"," InvoiceDate       "
"1","   UnitPrice        "
"1","   CustomerID    "
"1","   Country         "
"1","
"
"1"," Length:541909     "
"1"," Min.   :-11062.06  "
"1"," Min.   :12346   "
"1"," Length:541909     "
"1","
"
"1"," Class :character  "
"1"," 1st Qu.:     1.25  "
"1"," 1st Qu.:13953   "
"1"," Class :character  "
"1","
"
"1"," Mode  :character  "
"1"," Median :     2.08  "
"1"," Median :15152   "
"1"," Mode  :character  "
"1","
"
"1","                   "
"1"," Mean   :     4.61  "
"1"," Mean   :15288   "
"1","                   "
"1","
"
"1","                   "
"1"," 3rd Qu.:     4.13  "
"1"," 3rd Qu.:16791   "
"1","                   "
"1","
"
"1","                   "
"1"," Max.   : 38970.00  "
"1"," Max.   :18287   "
"1","                   "
"1","
"
"1","                   "
"1","                    "
"1"," NA's   :135080  "
"1","                   "
"1","
"
"1",""
"1","   ParsedDate                 "
"1","
"
"1"," Min.   :2010-12-01 08:26:00  "
"1","
"
"1"," 1st Qu.:2011-03-28 11:34:00  "
"1","
"
"1"," Median :2011-07-19 17:17:00  "
"1","
"
"1"," Mean   :2011-07-04 13:34:57  "
"1","
"
"1"," 3rd Qu.:2011-10-19 11:27:00  "
"1","
"
"1"," Max.   :2011-12-09 12:50:00  "
"1","
"
"1","                              "
"1","
"
"0","#Borramos todos los precios y cantidades negativas"
"0","data <- data %>% "
"0","  mutate(Quantity = replace(Quantity, Quantity<=0, NA),"
"0","         UnitPrice = replace(UnitPrice, UnitPrice<=0, NA))"
"0","#Borramos los NA"
"0","data <- data %>%"
"0","  drop_na()"
"0",""
"0","#Sustituimos los NA por 0, son 135080 observaciones que pueden contener información interesante"
"0","#data$CustomerID <- ifelse(is.na(data$CustomerID)== TRUE,0,data$CustomerID)"
"0","#Si hay duplicados los eliminamos con la función de dplyr"
"0","data <- data %>%"
"0","  distinct()"
"0",""
"0","#Añadimos una columna con el precio total de cada venta:"
"0","data <- data %>% mutate(lineTotal = Quantity * UnitPrice)"
"0",""
"0","#Añadimos una columna con el dia de la semana"
"0","data$weekDay <- wday(data$ParsedDate, label=TRUE)"
"0","#Como la etiquetas que genera automáticamente son horribles vamos a renombrarlas"
"0","levels(data$weekDay) <- c(""Dom"",""Lun"",""Mar"",""Mie"",""Jue"",""Vie"",""Sab"")"
"0",""
"0","#Añadimos una columna con el mes del año"
"0","data$month <- month(data$ParsedDate, label = TRUE)"
